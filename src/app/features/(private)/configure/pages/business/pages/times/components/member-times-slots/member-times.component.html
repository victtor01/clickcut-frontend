<div class="border rounded-xl bg-white dark:bg-gray-900/50 dark:border-gray-800 border-gray-200/80">
  <div class="p-6">
    <h3 class="text-lg font-semibold saira-font text-gray-800 dark:text-gray-100">
      Meus Horários de Atendimento
    </h3>
    <p class="text-sm text-gray-500 dark:text-gray-400">
      Personalize sua agenda. Defina os horários exatos em que você estará disponível para receber
      agendamentos.
    </p>

    <div
      class="mt-4 flex items-start gap-3 rounded-lg border border-indigo-200/80 bg-indigo-50 p-3 dark:border-indigo-800/50 dark:bg-indigo-900/20"
    >
      <i
        class="material-symbols-outlined mt-0.5 text-lg text-indigo-600 dark:text-indigo-400"
        aria-hidden="true"
        >info</i
      >
      <p class="text-sm text-indigo-800 dark:text-indigo-200">
        <strong class="font-semibold">Importante:</strong> Se nenhum horário for definido, o sistema
        usará automaticamente os
        <strong class="font-medium">horários de funcionamento da loja</strong>
        como sua disponibilidade padrão.
      </p>
    </div>
  </div>

  <div
    class="border-t dark:border-gray-800 border-gray-200/80 divide-y !divide-gray-200/80 dark:!divide-gray-800 flex-1"
  >
    @for (day of daysOfWeek; track day.value) {
      <div class="flex flex-col sm:flex-row gap-4 p-4 dark:border-gray-700">
        <div class="flex-shrink-0 w-full sm:w-48 flex justify-between items-center">
          <h3 class="font-semibold text-gray-500 dark:text-gray-100">
            {{ day.name }}
          </h3>
        </div>

        @if (!!this.schedule[0]) {
          <div class="flex-grow flex flex-wrap items-center gap-2">
            @for (slot of schedule[day.value].slots; track $index) {
              <div
                class="group relative flex items-center justify-between pl-3 pr-2 py-1.5 rounded-full bg-stone-100 dark:bg-gray-900"
              >
                <span class="text-sm font-medium text-gray-700 dark:text-gray-200"
                  >{{ slot.startTime }} - {{ slot.endTime }}</span
                >
                <div
                  class="relative right-0 sm:right-auto ml-1 flex items-center opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity"
                >
                  <button
                    type="button"
                    (click)="removeSlot(slot)"
                    class="min-w-8 h-8 rounded-full text-gray-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"
                  >
                    <span class="material-icons-outlined !text-lg">delete</span>
                  </button>
                </div>
              </div>
            }

            @if (addingSlotToDay !== day.value) {
              <button
                type="button"
                (click)="addTimeSlot(day.value)"
                class="flex items-center justify-center w-9 h-9 border-2 border-dashed border-gray-300 dark:border-gray-700 text-gray-400 dark:text-gray-500 rounded-full hover:bg-stone-100 dark:hover:bg-gray-800 hover:border-indigo-500 hover:text-indigo-500 transition-all"
                aria-label="Adicionar Horário"
              >
                <span class="material-icons-outlined">add</span>
              </button>
            } @else {
              <create-time-slot-form
                (save)="handleSaveNewSlot($event, day.value)"
                (cancel)="handleCancelNewSlot()"
              ></create-time-slot-form>
            }
          </div>
        }
      </div>
    }
  </div>
</div>

@if (hasEditable) {
  <div class="flex mt-2 justify-end">
    <button
      type="button"
      (click)="saveOperation()"
      class="p-1 bg-violet-600 hover:bg-violet-500 rounded-full px-4"
    >
      <span> Salvar </span>
    </button>
  </div>
}
