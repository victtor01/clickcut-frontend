<form
  [formGroup]="createForm"
  (ngSubmit)="onSubmit()"
  class="flex w-full max-w-4xl flex-col rounded-2xl bg-white h-[90vh] max-h-[40rem] dark:bg-neutral-950"
>
  <header
    class="flex flex-shrink-0 items-center justify-between gap-2 border-b border-stone-200 p-4 dark:border-neutral-800"
  >
    <h1 class="text-xl font-saira text-stone-800 dark:text-stone-100">Criar novo serviço</h1>
    <button
      type="button"
      (click)="closeModal()"
      class="grid h-8 w-8 place-items-center rounded-full text-stone-500 hover:bg-stone-200/60 hover:text-stone-800 dark:hover:bg-neutral-700/50 dark:hover:text-stone-200"
    >
      <i class="material-icons-outlined !text-2xl">close</i>
    </button>
  </header>

  <div class="flex-grow overflow-y-auto p-6">
    <div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
      <div class="lg:col-span-1">
        <h2 class="font-medium text-stone-600 dark:text-stone-300">Foto do serviço</h2>
        <p class="mb-4 text-sm text-stone-500 dark:text-stone-400">
          Uma boa imagem chama mais atenção.
        </p>

        <label
          for="photo-upload"
          class="group relative flex aspect-square w-full cursor-pointer flex-col items-center justify-center rounded-2xl border-2 border-dashed border-stone-300 bg-stone-100 transition-all hover:border-blue-500 hover:bg-blue-50 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:border-blue-500 dark:hover:bg-neutral-700/60"
        >
         <img
            *ngIf="previewPhoto"
            [src]="previewPhoto"
            alt="Foto do Serviço"
            class="absolute h-full w-full rounded-2xl object-cover z-10 opacity-70 group-hover:opacity-40 dark:opacity-60 dark:group-hover:opacity-30 transition-opacity"
          />
          
          <div
           class="z-20 flex flex-col items-center rounded-xl border border-gray-200 dark:border-neutral-800 bg-white/50 dark:bg-neutral-950/50 backdrop-blur-sm text-stone-500 dark:text-stone-400 text-center p-4"
          >
            <i class="material-icons-outlined !text-5xl mb-2">add_photo_alternate</i>
            <span class="font-medium text-sm">Selecionar imagem</span>
            <span class="mt-1 text-xs">PNG, JPG até 5MB</span>
          </div>
          <input id="photo-upload" type="file" class="hidden" (change)="onFileSelected($event)" />
        </label>
      </div>

      <div class="flex flex-col gap-6 lg:col-span-2">
        <div class="relative">
          <input
            id="title"
            type="text"
            class="peer block w-full rounded-lg border-2 border-stone-300 bg-stone-50 py-3 pl-5 pr-4 text-stone-900 placeholder:text-transparent focus:border-blue-600 focus:outline-none dark:border-neutral-700 dark:bg-neutral-900 dark:text-stone-100 dark:focus:border-blue-500"
            placeholder=""
            formControlName="title"
          />
          <label
            for="title"
            class="absolute left-4 flex h-1 items-center top-0 origin-[0] scale-75 transform text-stone-500 duration-200 peer-placeholder-shown:translate-y-6 peer-placeholder-shown:scale-100 peer-focus:-translate-y-px peer-focus:scale-75 peer-focus:text-blue-600 bg-stone-50 px-1 dark:text-stone-400 dark:peer-focus:text-blue-400 dark:bg-neutral-900"
          >
            Nome do serviço
          </label>
        </div>

        <div class="relative">
          <textarea
            id="description"
            class="peer block w-full min-h-[100px] rounded-lg border-2 border-stone-300 bg-stone-50 px-4 py-3 text-stone-900 placeholder:text-transparent focus:border-blue-600 focus:outline-none dark:border-neutral-700 dark:bg-neutral-900 dark:text-stone-100 dark:focus:border-blue-500"
            placeholder="Descrição"
            formControlName="description"
          ></textarea>
          <label
            for="description"
            class="absolute left-4 flex h-1 items-center top-0 origin-[0] scale-75 transform text-stone-500 duration-200 peer-placeholder-shown:translate-y-6 peer-placeholder-shown:scale-100 peer-focus:-translate-y-px peer-focus:scale-75 peer-focus:text-blue-600 bg-stone-50 px-1 dark:text-stone-400 dark:peer-focus:text-blue-400 dark:bg-neutral-900"
          >
            Descrição (opcional)
          </label>
        </div>

        <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
          <div class="relative">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
              <i class="material-icons-outlined text-stone-400 dark:text-stone-500">schedule</i>
            </div>
            <input
              id="duration"
              type="number"
              class="peer block w-full rounded-lg border-2 border-stone-300 bg-stone-50 py-3 pl-12 pr-4 text-stone-900 placeholder:text-transparent focus:border-blue-600 focus:outline-none dark:border-neutral-700 dark:bg-neutral-900 dark:text-stone-100 dark:focus:border-blue-500"
              placeholder="Duração"
              formControlName="durationInMinutes"
            />
            <label
              for="duration"
              class="absolute left-12 flex h-1 items-center top-0 origin-[0] scale-75 transform text-stone-500 duration-200 peer-placeholder-shown:translate-y-6 peer-placeholder-shown:scale-100 peer-focus:-translate-y-px peer-focus:scale-75 peer-focus:text-blue-600 bg-stone-50 px-1 dark:text-stone-400 dark:peer-focus:text-blue-400 dark:bg-neutral-900"
            >
              Duração (minutos)
            </label>
          </div>

          <div class="relative">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
              <span class="font-medium text-stone-500 dark:text-stone-400">R$</span>
            </div>
            <input
              id="price"
              type="text"
              class="peer block w-full rounded-lg border-2 border-stone-300 bg-stone-50 py-3 pl-12 pr-4 text-stone-900 placeholder:text-transparent focus:border-blue-600 focus:outline-none dark:border-neutral-700 dark:bg-neutral-900 dark:text-stone-100 dark:focus:border-blue-500"
              placeholder="Preço"
              appMoneyInput
              formControlName="price"
              [showCurrencySymbol]="false"
            />
            <label
              for="price"
              class="absolute left-12 flex h-1 items-center top-0 origin-[0] scale-75 transform text-stone-500 duration-200 peer-placeholder-shown:translate-y-6 peer-placeholder-shown:scale-100 peer-focus:-translate-y-px peer-focus:scale-75 peer-focus:text-blue-600 bg-stone-50 px-1 dark:text-stone-400 dark:peer-focus:text-blue-40 dark:bg-neutral-900"
            >
              Preço
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer
    class="flex flex-shrink-0 items-center justify-end gap-4 border-t border-stone-200 p-4 dark:border-neutral-800"
  >
    <button
      class="font-medium text-stone-600 transition-colors hover:text-stone-900 dark:text-stone-400 dark:hover:text-stone-100"
    >
      Cancelar
    </button>
    <button
      class="saira-font rounded-full bg-blue-600 px-6 py-2 font-medium text-white transition-colors hover:bg-blue-700 dark:hover:bg-blue-500"
    >
      Criar Serviço
    </button>
  </footer>
</form>

<style>
  input:checked ~ .dot {
    transform: translateX(100%);
    background-color: #2563eb;
  }
  input:checked ~ .block {
    background-color: #dbeafe;
  }
  .dark input:checked ~ .block {
    background-color: #1e3a8a;
  }
  .dark input:checked ~ .dot {
    background-color: #60a5fa;
  }
</style>
