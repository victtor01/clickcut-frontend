<div class="flex h-full w-full flex-col items-center justify-center p-8 text-center">
  <div class="mb-8">
    <div class="mx-auto mb-4 h-20 w-20 overflow-hidden rounded-full bg-stone-200 dark:bg-gray-700">
      @if (business.logoUrl) {
        <img [src]="business.logoUrl" [alt]="business.name" class="h-full w-full object-cover" />
      } @else {
        <span
          class="flex h-full w-full items-center justify-center text-3xl font-bold text-gray-500"
          >{{ business.name[0] }}</span
        >
      }
    </div>
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Acessar {{ business.name }}</h2>
    <p class="mt-1 text-gray-500 dark:text-gray-400">
      Este negócio é protegido. Por favor, insira a senha de 4 dígitos.
    </p>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col items-center">
    <!-- Container dos 4 inputs -->
    <div class="flex gap-3">
      @for (_ of [0, 1, 2, 3]; track $index) {
        <input
          #pinInput
          [formControlName]="'pin' + ($index + 1)"
          type="tel"
          maxlength="1"
          (input)="onInput($event, $index)"
          (keyup.backspace)="onBackspace($event, $index)"
          (paste)="$index === 0 ? onPaste($event) : null"
          class="h-16 w-16 rounded-lg border-2 bg-white/50 text-center text-3xl font-bold text-gray-800 transition-all focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:bg-gray-900/50 dark:text-white"
          [ngClass]="error() ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'"
        />
      }
    </div>

    <!-- Mensagem de Erro e Loading -->
    <div class="mt-4 min-h-[1.5rem] text-center">
      @if (isLoading()) {
        <p class="text-sm text-gray-500 dark:text-gray-400">Verificando...</p>
      }
      @if (error()) {
        <p class="text-sm font-semibold text-red-500 dark:text-red-400">{{ error() }}</p>
      }
    </div>
  </form>
</div>
