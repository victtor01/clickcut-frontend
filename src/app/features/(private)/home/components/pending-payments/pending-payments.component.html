<div
  class="flex flex-col rounded-2xl border min-h-[10rem] flex-1 p-6 mx-3 shadow-none dark:shadow-lg backdrop-blur-lg bg-white/30 dark:bg-black/20 border-stone-200/50 dark:border-white/10"
>
  <header class="justify-between flex items-center gap-2 mb-4">
    <span class="relative font-medium text-zinc-700 dark:text-zinc-300">
      Pagamentos Pendentes
    </span>
    <div class="relative grid place-items-center h-7 w-7 rounded-lg overflow-hidden">
      <div
        class="absolute inset-0 bg-white/20 dark:bg-black/10 backdrop-blur-sm rounded-lg border border-white/20 dark:border-white/5"
      ></div>
      <i class="material-icons-outlined !text-lg text-zinc-700 dark:text-zinc-300 relative z-[1]"
        >payments</i
      >
    </div>
  </header>

  <div class="flex-1">
    @if (isLoading()) {
      <div class="flex h-32 items-center justify-center">
        <i class="material-symbols-outlined animate-spin text-3xl text-zinc-500 dark:text-zinc-400"
          >progress_activity</i
        >
      </div>
    } @else {
      <div class="flow-root">
        <ul class="-my-4 divide-y divide-white/10 dark:divide-white/5">
          @for (booking of pendingBookings(); track booking.id) {
            <li class="flex items-center justify-between gap-4 py-4">
              <div class="flex items-center gap-3 min-w-0">
                @if (booking.clientPhotoUrl) {
                  <img
                    [src]="booking.clientPhotoUrl"
                    class="h-8 w-8 rounded-full object-cover flex-shrink-0 bg-stone-100 dark:bg-zinc-800"
                  />
                } @else {
                  <div
                    class="flex h-8 w-8 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-700/50 flex-shrink-0"
                  >
                    <span class="font-medium text-xs text-zinc-600 dark:text-zinc-300">{{
                      booking.clientName[0] | slice: 0 : 1
                    }}</span>
                  </div>
                }
                <div class="min-w-0">
                  <p
                    class="text-sm font-semibold text-zinc-800 dark:text-white truncate"
                    [title]="booking.clientName"
                  >
                    {{ booking.clientName }}
                  </p>
                  <p
                    class="text-xs text-zinc-500 dark:text-zinc-400 truncate"
                    [title]="booking.serviceNames"
                  >
                    {{ booking.serviceNames }}
                  </p>
                </div>
              </div>

              <div class="flex items-center gap-6 sm:gap-4 flex-shrink-0">
                <span class="text-sm font-semibold text-zinc-800 dark:text-white">
                  {{ booking.totalAmount / 100 | currency: 'BRL' }}
                </span>
                <button
                  (click)="registerPayment(booking)"
                  class="rounded-full bg-violet-600 px-3 py-1.5 text-xs font-semibold text-white transition-colors hover:bg-indigo-500"
                >
                  Pagamento
                </button>
              </div>
            </li>
          } @empty {
            <li class="flex flex-col items-center justify-center py-10 text-center">
              <div
                class="flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/50"
              >
                <i class="material-symbols-outlined text-2xl text-green-600 dark:text-green-400"
                  >check_all</i
                >
              </div>
              <p class="mt-3 font-semibold text-zinc-800 dark:text-white">Tudo em dia!</p>
              <p class="mt-1 text-sm text-zinc-500 dark:text-zinc-400">
                Não há pagamentos pendentes no momento.
              </p>
            </li>
          }
        </ul>
      </div>
    }
  </div>
</div>
