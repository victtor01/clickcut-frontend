<div class="p-4 lg:pl-0">
  <div class="p-3 lg:px-6">
    <div>
      <h2 class="text-2xl font-semibold saira-font text-slate-700 dark:text-slate-100">
        Histórico de Agendamentos
      </h2>
      <p class="mt-1 text-sm text-slate-500 dark:text-slate-400">
        Acompanhe seus compromissos futuros e revise os anteriores.
      </p>
    </div>

    <div *ngIf="isLoading" class="space-y-8">
      <div class="animate-pulse flex">
        <div class="flex-shrink-0 w-16 text-center">
          <div class="h-10 w-10 mx-auto rounded-full bg-zinc-200 dark:bg-zinc-800"></div>
        </div>
        <div class="flex-1 space-y-3 py-1">
          <div class="h-4 rounded bg-zinc-200 dark:bg-zinc-800"></div>
          <div class="h-3 w-3/4 rounded bg-zinc-200 dark:bg-zinc-800"></div>
          <div class="h-3 w-1/2 rounded bg-zinc-200 dark:bg-zinc-800"></div>
        </div>
      </div>
      <div class="animate-pulse flex">
        <div class="flex-shrink-0 w-16 text-center">
          <div class="h-10 w-10 mx-auto rounded-full bg-zinc-200 dark:bg-zinc-800"></div>
        </div>
        <div class="flex-1 space-y-3 py-1">
          <div class="h-4 rounded bg-zinc-200 dark:bg-zinc-800"></div>
          <div class="h-3 w-3/4 rounded bg-zinc-200 dark:bg-zinc-800"></div>
          <div class="h-3 w-1/2 rounded bg-zinc-200 dark:bg-zinc-800"></div>
        </div>
      </div>
    </div>

    <div *ngIf="!isLoading">
      <div *ngIf="allBookings.length === 0; else hasBookings">
        <div class="text-center rounded-xl bg-zinc-50 p-12 dark:bg-zinc-900/50">
          <i class="material-icons-outlined text-6xl text-indigo-400">calendar_add_on</i>
          <h3 class="mt-4 text-lg font-semibold text-zinc-800 dark:text-zinc-200">
            Nenhum agendamento encontrado
          </h3>
          <p class="mt-1 text-sm text-zinc-500 dark:text-zinc-400">
            Que tal marcar seu primeiro serviço agora mesmo?
          </p>
          <button
            type="button"
            class="mt-6 inline-flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
          >
            <i class="material-icons-outlined !text-base">search</i>
            Explorar Serviços
          </button>
        </div>
      </div>

      <ng-template #hasBookings>
        <div class="space-y-16 mt-5">
          <section *ngIf="upcomingBookings.length > 0">
            <h2
              class="text-sm font-medium tracking-wider uppercase text-zinc-600 dark:text-zinc-400"
            >
              Próximos
            </h2>
            <ul class="relative mt-6 space-y-8">
              <div class="absolute left-4.5 top-2 h-full w-0.5 bg-zinc-200 dark:bg-zinc-800"></div>

              <li *ngFor="let booking of upcomingBookings" class="relative pl-16">
                <div class="absolute -left-0 top-1">
                  <span
                    class="flex h-9 w-9 items-center justify-center rounded-full bg-white dark:bg-zinc-950 ring-2 ring-offset-2 ring-offset-white dark:ring-offset-zinc-950 ring-indigo-500 dark:ring-indigo-400"
                  >
                    <i
                      class="material-icons-outlined !text-2xl text-violet-600 dark:text-violet-300"
                    >
                      update
                    </i>
                  </span>
                </div>

                <div class="flex-1">
                  <div class="flex items-center justify-between">
                    <time class="text-sm font-medium leading-none text-zinc-600 dark:text-zinc-400">
                      {{ booking.startAt | date: 'fullDate' }} •
                      {{ booking.startAt | date: 'HH:mm' }}
                    </time>
                    <span
                      class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset"
                      [ngClass]="statusMap[booking.status].classes"
                    >
                      {{ statusMap[booking.status].label }}
                    </span>
                  </div>
                  <h3 class="mt-2 text-lg text-zinc-700 dark:text-zinc-100">
                    {{ booking.title }}
                  </h3>
                  <p class="mt-1 text-sm text-zinc-600 dark:text-zinc-400">
                    Em
                    <span class="font-medium text-zinc-700 dark:text-zinc-300">{{
                      booking.business?.name
                    }}</span>
                    com
                    <span class="font-medium text-zinc-700 dark:text-zinc-300">{{
                      booking?.assignedTo?.username
                    }}</span
                    >.
                  </p>
                </div>
              </li>
            </ul>
          </section>

          <section *ngIf="pastBookings.length > 0">
            <h2
              class="text-sm font-medium tracking-wider uppercase text-zinc-600 dark:text-zinc-400"
            >
              Anteriores
            </h2>
            <ul class="relative mt-6 space-y-8">
              <div class="absolute left-4.5 top-2 h-full w-0.5 bg-zinc-200 dark:bg-zinc-800"></div>

              <li *ngFor="let booking of pastBookings" class="relative pl-16">
                <div class="absolute -left-0 top-1">
                  <span
                    class="flex h-9 w-9 items-center justify-center rounded-full bg-white dark:bg-zinc-950 ring-2 ring-offset-2 ring-offset-white dark:ring-offset-zinc-950"
                    [ngClass]="{
                      'ring-green-500 dark:ring-green-400':
                        booking.status === 'COMPLETED' || booking.status === 'PAID',
                      'ring-indigo-500 dark:ring-indigo-600': booking.status === 'CONFIRMED',
                      'ring-red-500 dark:ring-red-400': booking.status === 'CANCELLED',
                      'ring-zinc-400 dark:ring-zinc-500': booking.status === 'NO_SHOW',
                    }"
                  >
                    <i
                      *ngIf="booking.status === 'COMPLETED'"
                      class="material-icons-outlined !text-xl text-green-600 dark:text-green-300"
                      >check_circle</i
                    >
                    <i
                      *ngIf="booking.status === 'CANCELLED'"
                      class="material-icons-outlined !text-xl text-red-600 dark:text-red-300"
                      >cancel</i
                    >
                    <i
                      *ngIf="booking.status === 'NO_SHOW'"
                      class="material-icons-outlined !text-xl text-zinc-600 dark:text-zinc-300"
                      >do_not_disturb_on</i
                    >

                    <i
                      *ngIf="booking.status === 'CREATED'"
                      class="material-icons-outlined !text-xl text-zinc-600 dark:text-zinc-300"
                      >browse_gallery</i
                    >

                    <i
                      *ngIf="booking.status === 'CONFIRMED'"
                      class="material-symbols-outlined !text-xl text-indigo-600 dark:text-indigo-300"
                      >check_circle_unread</i
                    >

                    <i
                      *ngIf="booking.status === 'PAID'"
                      class="material-icons-outlined !text-xl text-green-600 dark:text-green-300"
                      >paid</i
                    >
                  </span>
                </div>

                <div class="flex-1 opacity-90">
                  <div class="flex items-center justify-between">
                    <time class="text-sm font-medium leading-none text-zinc-600 dark:text-zinc-400">
                      {{ booking.startAt | date: 'fullDate' }}
                    </time>
                    <span
                      class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset"
                      [ngClass]="statusMap[booking.status].classes"
                    >
                      {{ statusMap[booking.status].label }}
                    </span>
                  </div>
                  <h3 class="mt-2 text-lg text-zinc-700 dark:text-zinc-100">
                    {{ booking.title }}
                  </h3>
                  <p class="mt-1 text-sm text-zinc-600 dark:text-zinc-400">
                    Em
                    <span class="font-medium text-zinc-700 dark:text-zinc-300">{{
                      booking.business?.name
                    }}</span>
                    com
                    <span class="font-medium text-zinc-700 dark:text-zinc-300">{{
                      booking?.assignedTo?.username
                    }}</span
                    >.
                  </p>
                </div>
              </li>
            </ul>
          </section>
        </div>
      </ng-template>
    </div>
  </div>
</div>
