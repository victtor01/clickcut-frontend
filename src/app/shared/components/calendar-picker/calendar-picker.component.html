<div class="p-0 sm:p-4">
  <!-- Cabeçalho (Navegação de Mês) -->
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-semibold text-gray-800 dark:text-white capitalize">
      {{ currentMonthName() }}
    </h3>
    <div class="flex items-center gap-2">
      <button
        (click)="changeMonth(-1)"
        class="grid place-items-center w-8 h-8 rounded-full text-gray-500 hover:bg-stone-100 dark:text-gray-400 dark:hover:bg-gray-800"
      >
        <i class="material-symbols-outlined">chevron_left</i>
      </button>
      <button
        (click)="changeMonth(1)"
        class="grid place-items-center w-8 h-8 rounded-full text-gray-500 hover:bg-stone-100 dark:text-gray-400 dark:hover:bg-gray-800"
      >
        <i class="material-symbols-outlined">chevron_right</i>
      </button>
    </div>
  </div>

  <!-- Estado de Carregamento -->
  @if (isLoading) {
    <div class="flex h-64 items-center justify-center">
      <i class="material-symbols-outlined animate-spin text-4xl text-indigo-500">
        progress_activity
      </i>
    </div>
  } @else {
    <!-- Grade do Calendário -->
    <div class="grid grid-cols-7 gap-y-1">
      @for (day of ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb']; track day) {
        <div class="text-center text-xs font-semibold text-gray-400 dark:text-gray-500 pb-2">
          {{ day }}
        </div>
      }

      @for (day of calendarGrid(); track day.date) {
        <button
          type="button"
          (click)="selectDate(day)"
          [disabled]="!day.isAvailable"
          class="flex h-10 w-10 items-center justify-center rounded-full text-sm font-medium transition-all duration-150"
          [class.opacity-30]="!day.isCurrentMonth"
          [class.cursor-not-allowed]="!day.isAvailable || day.isPast"
          [class.text-gray-400]="day.isPast"
          [class.dark:text-gray-600]="day.isPast"
          [class.line-through]="day.isPast"
          [class.text-gray-400]="!day.isAvailable && day.isCurrentMonth && !day.isPast"
          [class.dark:text-red-500]="!day.isAvailable && day.isCurrentMonth && !day.isPast"
          [class.text-gray-700]="day.isAvailable && day.isCurrentMonth && !day.isSelected"
          [class.dark:text-gray-200]="day.isAvailable && day.isCurrentMonth && !day.isSelected"
          [class.hover:bg-stone-100]="day.isAvailable && day.isCurrentMonth && !day.isSelected"
          [class.dark:hover:bg-gray-800]="day.isAvailable && day.isCurrentMonth && !day.isSelected"
          [class.border-2]="day.isToday && !day.isSelected"
          [class.border-indigo-500]="day.isToday && !day.isSelected"
          [class.bg-indigo-600]="day.isSelected"
          [class.text-white]="day.isSelected"
          [class.hover:bg-indigo-700]="day.isSelected"
          [class.dark:bg-indigo-500]="day.isSelected"
        >
          {{ day.date.date() }}
        </button>
      }
    </div>
  }
</div>